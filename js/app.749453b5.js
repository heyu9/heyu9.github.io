(function(e){function t(t){for(var i,r,c=t[0],s=t[1],l=t[2],p=0,u=[];p<c.length;p++)r=c[p],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&u.push(n[r][0]),n[r]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);d&&d(t);while(u.length)u.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],i=!0,c=1;c<o.length;c++){var s=o[c];0!==n[s]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=o[0]))}return e}var i={},n={app:0},a=[];function r(t){if(i[t])return i[t].exports;var o=i[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=i,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(o,i,function(t){return e[t]}.bind(null,i));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=s;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"00fc":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);var i=o("430a"),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},a=[],r=(o("5c0b"),o("4ac2")),c={},s=Object(r["a"])(c,n,a,!1,null,null,null),l=s.exports,d=o("8aaf"),p=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"home"},[o("Map",{on:{map:e.getMap}}),e._m(0)],1)},u=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"diagram_box"},[o("div",{staticClass:"join_circle"}),o("div",{staticClass:"join"},[e._v("参与群击计划")]),o("div",{staticClass:"not_join_circle"}),o("div",{staticClass:"join"},[e._v("不参与群击计划")])])}],m=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"map_wrap"},[o("div",{attrs:{id:e.id}})])},h=[],f=o("0e4f"),y=o.n(f),g={props:{id:{default:"map"}},data(){return{map:null}},methods:{initmap(){y.a.accessToken="pk.eyJ1IjoiMTU5MDk4Mzk1NjQiLCJhIjoiY2tpZmt0MThrMGtwcTJ5bngxN2xqNnYzeCJ9.erBGt3UuT5gNjeD-d_p_VA",this.map=new y.a.Map({container:this.id,style:"mapbox://styles/15909839564/ckjxy4d640am718o41mbpwfaj",center:["108.26150788281248","33.69572366743195"],zoom:4.6,pitch:0,bearing:0,antialias:!0}),this.map.on("load",e=>{this.map.addSource("points",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:"points1",type:"circle",source:"points",paint:{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":.5,"circle-stroke-color":"#fff"}}),this.map.addLayer({id:"points",type:"symbol",source:"points",paint:{"text-color":"#11b4da"},layout:{"text-field":"{title}","text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-offset":[0,.6],"text-anchor":"top"}})})}},mounted(){this.initmap(),this.$emit("map",this.map)}},J=g,b=(o("626f"),Object(r["a"])(J,m,h,!1,null,"89fde6d2",null)),v=b.exports,w=o("73ef"),C=o.n(w),j={name:"Home",components:{Map:v},data(){return{swords:[{coordinate:"116.41113307958986,39.949102930147106",isJoin:1,name:"(^^)"},{coordinate:"104.03914500687407,30.586625922517232",isJoin:0,name:"彪彪"},{coordinate:"113.90530127116395,22.529352820096197",isJoin:1,name:"狗子哥"},{coordinate:"113.94967602269357,22.530769175884647",isJoin:0,name:"雫"},{coordinate:"120.40920751861574,36.186893058428744",isJoin:1,name:"老何"},{coordinate:"117.17668904434204,31.839912482865845",isJoin:0,name:"顶顶"},{coordinate:"120.62068171163940,31.263083367533490",isJoin:0,name:"坤坤"},{coordinate:"108.99605882453918,34.269488637808784",isJoin:0,name:"碎落星沉"},{coordinate:"116.41905774090574,40.027328559551165",isJoin:0,name:"紫苜"},{coordinate:"114.32466419067386,29.831808386255010",isJoin:0,name:"白给"},{coordinate:"104.04125233882905,30.630496394258740",isJoin:0,name:"我不是新人"},{coordinate:"113.34650148365782,23.143999892753552",isJoin:1,name:"倘若"},{coordinate:"120.08295836499023,30.313287696779017",isJoin:0,name:"希希"},{coordinate:"112.47094068031984,34.612638347246860",isJoin:1,name:"干粮"},{coordinate:"120.09094545696252,30.312138348746604",isJoin:0,name:"葵葵"},{coordinate:"108.88602191401674,34.215078327677396",isJoin:0,name:"小七爸爸"},{coordinate:"113.94948587051393,22.569020257346570",isJoin:0,name:"阿信"},{coordinate:"116.42128933880613,39.779908103179594",isJoin:0,name:"有为"},{coordinate:"118.79231142195131,31.932585957283543",isJoin:0,name:"万里"},{coordinate:"120.10940413685810,30.282109764142450",isJoin:0,name:"小恐龙"},{coordinate:"116.58939678881453,39.795798882792590",isJoin:1,name:"小秦"},{coordinate:"104.03928271834769,30.676244094831578",isJoin:0,name:"图图"},{coordinate:"120.98492405334474,30.921111536667944",isJoin:0,name:"小金猊"},{coordinate:"121.24361497043957,31.360764319719586",isJoin:1,name:"牛妹"},{coordinate:"116.37278158877180,39.877978201497710",isJoin:0,name:"太白"},{coordinate:"118.06722153637693,24.571764620098385",isJoin:0,name:"5t5"},{coordinate:"116.47432197544859,40.019597359598360",isJoin:0,name:"空空"},{coordinate:"112.62797779629516,34.626885568896480",isJoin:0,name:"晴朗"},{coordinate:"114.41467377111860,30.484916549819292",isJoin:0,name:"胡歌的腿毛"},{coordinate:"117.13231076214598,31.803158856273180",isJoin:0,name:"盖亚"},{coordinate:"116.33532990429686,40.076702112310564",isJoin:0,name:"对方正在输入中"},{coordinate:"121.31916800000000,31.046414705840217",isJoin:0,name:"麻吉"},{coordinate:"111.50080086444856,27.218263012785233",isJoin:0,name:"M"},{coordinate:"113.34174289713708,23.099218797391572",isJoin:0,name:"小瑞瑞"},{coordinate:"104.04829027881112,30.705287025921535",isJoin:0,name:"半点"},{coordinate:"116.67978012796519,39.843986682326175",isJoin:0,name:"码奴"},{coordinate:"113.38694956897733,23.128649265879282",isJoin:0,name:"小方"},{coordinate:"113.88326212297079,22.554126873227190",isJoin:0,name:"Maggie"},{coordinate:"116.45926941845701,39.827721860134490",isJoin:0,name:"1"},{coordinate:"103.98451658843388,30.619920343069353",isJoin:0,name:"恦"},{coordinate:"111.50457910644879,27.211422559444696",isJoin:0,name:"及时行乐"},{coordinate:"120.12057674955024,30.356680218797860",isJoin:0,name:"zwb"},{coordinate:"112.61689801814424,26.867951961745792",isJoin:0,name:"こびと"}]}},methods:{getMap(e){this.map=e,e.on("load",e=>{this.setPoint(this.swords),this.centroid()})},setPoint(e){let t=this.map,o={type:"FeatureCollection",features:[]};e.forEach(e=>{if(e.coordinate){let t=e.coordinate.split(",");o.features.push({type:"Feature",geometry:{type:"Point",coordinates:t},properties:{title:e.name,point:e.coordinate.split(","),color:e.isJoin}})}});let i=t.getSource("goodsSource");void 0==i&&(t.addSource("goodsSource",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),t.addLayer({id:"goodsPoints",type:"circle",source:"goodsSource",paint:{"circle-color":["match",["get","color"],0,"#fcbf49",1,"#ff8500","#fcbf49"],"circle-radius":["match",["get","color"],0,6,1,8,6],"circle-stroke-width":.5,"circle-stroke-color":"white","circle-pitch-scale":"viewport","circle-stroke-opacity":.5}}),t.addLayer({id:"goodsName",type:"symbol",source:"goodsSource",paint:{"text-color":"#11b4da"},layout:{"symbol-placement":"point","text-field":"{title}","text-offset":[0,-2],"text-anchor":"top","icon-allow-overlap":!0,"icon-ignore-placement":!0}})),t.getSource("goodsSource").setData(o)},centroid(){let e=[];this.swords.forEach(t=>{1===t.isJoin&&e.push([1*t.coordinate.split(",")[0],1*t.coordinate.split(",")[1]])}),console.log(e);let t=0,o=0;for(let n=0;n<e.length;n++)t+=e[n][0],o+=e[n][1];console.log(t,o);let i=[t/e.length,o/e.length];console.log(i),this.setCentroidLayer(i),this.getCircleData(i)},setCentroidLayer(e){let t=this.map;t.flyTo({pitch:45});var o=100;let i=t.getSource("pointSource");if(void 0===i){var n={width:o,height:o,data:new Uint8Array(o*o*4),onAdd:function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,this.context=e.getContext("2d")},render:function(){var e=1e3,i=performance.now()%e/e,n=o/2*.3,a=o/2*.7*i+n,r=this.context;return r.clearRect(0,0,this.width,this.height),r.beginPath(),r.arc(this.width/2,this.height/2,a,0,2*Math.PI),r.fillStyle="rgba(255, 200, 200,"+(1-i)+")",r.fill(),r.beginPath(),r.arc(this.width/2,this.height/2,n,0,2*Math.PI),r.fillStyle="rgba(255, 100, 100, 1)",r.strokeStyle="white",r.lineWidth=2+4*(1-i),r.fill(),r.stroke(),this.data=r.getImageData(0,0,this.width,this.height).data,t.triggerRepaint(),!0}};t.addImage("land-dot",n,{pixelRatio:2}),t.addSource("pointSource",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:e}}]}}),t.addLayer({id:"house_point",type:"symbol",source:"pointSource",layout:{"icon-image":"land-dot"}})}t.getSource("pointSource").setData({type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:e}}]})},getCircleData(e){C.a.get("https://api.mapbox.com/isochrone/v1/mapbox/driving/"+e.join(",")+"?contours_minutes=60&polygons=true&access_token=pk.eyJ1IjoiMTU5MDk4Mzk1NjQiLCJhIjoiY2tpZmt0MThrMGtwcTJ5bngxN2xqNnYzeCJ9.erBGt3UuT5gNjeD-d_p_VA").then(e=>{this.setTimeCircle(e.data.features[0])})},setTimeCircle(e){let t=this.map,o=t.getSource("timeCircle");void 0===o&&(t.addSource("timeCircle",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),t.addLayer({id:"timeCircle_fill",type:"fill",source:"timeCircle",layout:{},paint:{"fill-color":"#fcbf49","fill-opacity":.2}}),t.addLayer({id:"timeCircle_line",type:"line",source:"timeCircle",layout:{},paint:{"line-color":"#fcbf49","line-opacity":1}})),t.getSource("timeCircle").setData({type:"FeatureCollection",features:[e]})}},mounted(){}},x=j,S=(o("9ced"),Object(r["a"])(x,p,u,!1,null,"64bd497c",null)),_=S.exports;i["a"].use(d["a"]);const M=[{path:"/",name:"Home",component:_}],k=new d["a"]({mode:"history",base:"/",routes:M});var P=k,O=o("7736");i["a"].use(O["a"]);var T=new O["a"].Store({state:{},mutations:{},actions:{},modules:{}});i["a"].config.productionTip=!1,new i["a"]({router:P,store:T,render:function(e){return e(l)}}).$mount("#app")},"5c0b":function(e,t,o){"use strict";o("d766")},"626f":function(e,t,o){"use strict";o("00fc")},"9ced":function(e,t,o){"use strict";o("b7be")},b7be:function(e,t,o){},d766:function(e,t,o){}});
//# sourceMappingURL=app.749453b5.js.map